# Interactive SQL Server Jobs Timeline Visual

This repository contains scripts and resources to help you optimize the scheduling of jobs on SQL Server instances, both on-premises and in Azure SQL Managed Instances. The key feature of this repository is a stored procedure that utilizes the R External Language to generate an HTML file with an interactive timeline of jobs executed. This tool provides a clear and intuitive visualization of job distribution, making it easier to analyze and reorganize the server workload for improved performance and efficiency.

An article detailing all the features of the stored procedure is available on _Towards Data Science_ [here](https://towardsdatascience.com/visualizing-sql-server-job-history-unlocking-hidden-capabilities-with-sql-server-language-63ed965b091e).

## Features

- **Interactive Timeline Visualization**: Generate HTML files with interactive Gantt charts of SQL Server job executions using the `vistime` package in R.
- **Comprehensive Job Filtering**: Filter jobs by date range and custom regex patterns to include or exclude specific job names.
- **Flexible Configuration**: Customize input parameters such as start date, end date, destination path for the HTML file, and filtering criteria.

## Contents

- `scripts/`
  - `create_gantt_chart.sql`: SQL script to create the stored procedure for generating the Gantt chart.
  - `generate_timeline.R`: R script used by the stored procedure to create the interactive timeline.
- `README.md`: Detailed instructions on how to set up and use the scripts.
- `examples/`: Example HTML files generated by the tool.

## Prerequisites

- SQL Server (on-premises or Azure SQL Managed Instance) with Machine Learning Services enabled
- R 4.2.2 or compatible version with the following packages installed:
  - `vistime`
  - `htmlwidgets`
  - `odbc`
  - `dplyr`
  - `lubridate`
  - `DescTools`

## Installation

1. **Install Required R Packages**:
   ```r
   install.packages("vistime")
   install.packages("htmlwidgets")
   install.packages("odbc")
   install.packages("dplyr")
   install.packages("lubridate")
   install.packages("DescTools")

2. **Create the Destination Folder**:
   Ensure the folder `C:\job-execution-gantt-plots` exists or modify the path in the script to a valid directory.

3. **Deploy the Stored Procedure**:
   Execute the `create_gantt_chart.sql` script in your SQL Server instance to create the stored procedure.

4. **Run the Procedure**:
   Call the stored procedure from SQL Server to generate the interactive timeline.

## Usage

Follow the instructions in the `README.md` file to configure and run the scripts. Customize the input variables as needed to fit your specific environment and requirements.

## Contributions

Contributions are welcome! Please submit a pull request or open an issue to discuss potential improvements or feature requests.
